const _0x2df4bb=_0x9891;(function(_0x1bd7e5,_0x42d241){const _0x1940b2=_0x9891,_0x1ba410=_0x1bd7e5();while(!![]){try{const _0x232efc=parseInt(_0x1940b2(0xab))/0x1+-parseInt(_0x1940b2(0x92))/0x2*(-parseInt(_0x1940b2(0x6a))/0x3)+-parseInt(_0x1940b2(0xa4))/0x4+parseInt(_0x1940b2(0x9c))/0x5*(parseInt(_0x1940b2(0xc5))/0x6)+-parseInt(_0x1940b2(0x6d))/0x7*(parseInt(_0x1940b2(0xa9))/0x8)+parseInt(_0x1940b2(0x6e))/0x9+-parseInt(_0x1940b2(0x82))/0xa;if(_0x232efc===_0x42d241)break;else _0x1ba410['push'](_0x1ba410['shift']());}catch(_0x480f3e){_0x1ba410['push'](_0x1ba410['shift']());}}}(_0x4ec9,0x99744),process['on']('unhandledRejection',_0x420de2=>console[_0x2df4bb(0x8e)](_0x420de2)),process['on']('uncaughtException',_0x3c162e=>console['log'](_0x3c162e)));const axios=require(_0x2df4bb(0x73)),fs=require(_0x2df4bb(0xad)),google=require('googleapis')[_0x2df4bb(0x84)],nodemailer=require('nodemailer'),express=require(_0x2df4bb(0x9a)),app=express(),port=process['env'][_0x2df4bb(0x9d)]||0x1c09,{execSync}=require(_0x2df4bb(0x78)),log=require(_0x2df4bb(0xc1)),path=require(_0x2df4bb(0x7f));app[_0x2df4bb(0x80)](express[_0x2df4bb(0x7b)]()),app['use'](express['urlencoded']({'extended':!![]})),process['env']['BLUEBIRD_W_FORGOTTEN_RETURN']=0x0;function _0x4ec9(){const _0x31a179=['/Shourov','uptime','env','/api/stats','express','npx\x20jsonlint\x20\x22','217715URrdoD','PORT','.json','auth','\x22\x20not\x20found','round','0.0.0.0','parentID','3833596YkaotG','join','existsSync','cpus','.txt','8atlnUp','utils','901746KpXHcd','/api/appstate','fs-extra','Mail\x20system\x20failed\x20to\x20init,\x20but\x20skipping\x20to\x20prevent\x20crash.','[\x20SYSTEM\x20]\x20Checking\x20Version\x20&\x20Integrity...','whiteListIds','Gmail','writeFileSync','.dev.json','commandBanned','error','email','normalize','credentials','status','length','public/index.html','heapUsed','writeFile','version','checkAndCreateParentFolder','production','./logger/log.js','setCredentials','floor','temp','66VOgqjp','message','.\x20Health\x20check\x20passed.','post','warn','15nESvja','replace','map','246554zsGoCs','9763227exQKhR','split','sendMail','Appstate\x20missing','.js','axios','utf8','/appstate','drive','CONFIG','child_process','includes','/configCommands','json','memoryUsage','.dev.txt','\x22:\x0a','path','use','cyan','16630780FIsyJA','Invalid\x20JSON\x20file\x20\x22','google','\x20\x20\x20\x20at','OAuth2','package.json','File\x20\x22','exit','indexOf','whiteListMode','sendFile','Write\x20failed','log','[\x20SERVER\x20]\x20Active\x20on\x20port\x20','get','development','327890lJebEB','slice','body','./bot/login/login'];_0x4ec9=function(){return _0x31a179;};return _0x4ec9();}const pkgPath=path[_0x2df4bb(0xa5)](__dirname,_0x2df4bb(0x87));if(fs[_0x2df4bb(0xa6)](pkgPath)){const pkg=JSON['parse'](fs['readFileSync'](pkgPath,_0x2df4bb(0x74)));pkg[_0x2df4bb(0xbe)]='2.1.0',fs[_0x2df4bb(0xb2)](pkgPath,JSON['stringify'](pkg,null,0x2));}function validJSON(_0x18357a){const _0x458d24=_0x2df4bb;try{if(!fs[_0x458d24(0xa6)](_0x18357a))throw new Error(_0x458d24(0x88)+_0x18357a+_0x458d24(0xa0));return execSync(_0x458d24(0x9b)+_0x18357a+'\x22',{'stdio':'pipe'}),!![];}catch(_0x4642d9){let _0x3ad278=_0x4642d9[_0x458d24(0xc6)];_0x3ad278=_0x3ad278[_0x458d24(0x6f)]('\x0a')[_0x458d24(0x93)](0x1)[_0x458d24(0xa5)]('\x0a');const _0x553462=_0x3ad278[_0x458d24(0x8a)](_0x458d24(0x85));_0x3ad278=_0x3ad278[_0x458d24(0x93)](0x0,_0x553462!=-0x1?_0x553462-0x1:_0x3ad278[_0x458d24(0xba)]);throw new Error(_0x3ad278);}}const {NODE_ENV}=process[_0x2df4bb(0x98)],dirConfig=path['normalize'](__dirname+'/config'+([_0x2df4bb(0xc0),_0x2df4bb(0x91)]['includes'](NODE_ENV)?'.dev.json':_0x2df4bb(0x9e))),dirConfigCommands=path[_0x2df4bb(0xb7)](__dirname+_0x2df4bb(0x7a)+([_0x2df4bb(0xc0),_0x2df4bb(0x91)][_0x2df4bb(0x79)](NODE_ENV)?_0x2df4bb(0xb3):'.json')),dirAccount=__dirname+_0x2df4bb(0x96)+([_0x2df4bb(0xc0),_0x2df4bb(0x91)]['includes'](NODE_ENV)?_0x2df4bb(0x7d):_0x2df4bb(0xa8));for(const pathDir of[dirConfig,dirConfigCommands]){try{validJSON(pathDir);}catch(_0x557317){log[_0x2df4bb(0xb5)](_0x2df4bb(0x77),_0x2df4bb(0x83)+pathDir[_0x2df4bb(0x6b)](__dirname,'')+_0x2df4bb(0x7e)+_0x557317[_0x2df4bb(0xc6)][_0x2df4bb(0x6f)]('\x0a')[_0x2df4bb(0x6c)](_0x2e40de=>'\x20\x20'+_0x2e40de)[_0x2df4bb(0xa5)]('\x0a')+'\x0aPlease\x20fix\x20it\x20and\x20restart\x20bot'),process[_0x2df4bb(0x89)](0x0);}}const config=require(dirConfig);if(config[_0x2df4bb(0x8b)]?.[_0x2df4bb(0xb0)]&&Array['isArray'](config[_0x2df4bb(0x8b)][_0x2df4bb(0xb0)]))config['whiteListMode'][_0x2df4bb(0xb0)]=config['whiteListMode'][_0x2df4bb(0xb0)][_0x2df4bb(0x6c)](_0x231a47=>_0x231a47['toString']());const configCommands=require(dirConfigCommands);global['GoatBot']={'startTime':Date['now']()-process['uptime']()*0x3e8,'commands':new Map(),'eventCommands':new Map(),'commandFilesPath':[],'eventCommandsFilesPath':[],'aliases':new Map(),'onFirstChat':[],'onChat':[],'onEvent':[],'onReply':new Map(),'onReaction':new Map(),'onAnyEvent':[],'config':config,'configCommands':configCommands,'envCommands':{},'envEvents':{},'envGlobal':{},'reLoginBot':function(){},'Listening':null,'oldListening':[],'callbackListenTime':{},'storage5Message':[],'fcaApi':null,'botID':null},global['db']={'allThreadData':[],'allUserData':[],'allDashBoardData':[],'allGlobalData':[],'threadModel':null,'userModel':null,'dashboardModel':null,'globalModel':null,'threadsData':null,'usersData':null,'dashBoardData':null,'globalData':null,'receivedTheFirstMessage':{}},global['client']={'dirConfig':dirConfig,'dirConfigCommands':dirConfigCommands,'dirAccount':dirAccount,'countDown':{},'cache':{},'database':{'creatingThreadData':[],'creatingUserData':[],'creatingDashBoardData':[],'creatingGlobalData':[]},'commandBanned':configCommands[_0x2df4bb(0xb4)]};const utils=require('./utils.js');global['utils']=utils;const {colors}=utils;function _0x9891(_0x277a0c,_0xd840d6){_0x277a0c=_0x277a0c-0x6a;const _0x4ec94b=_0x4ec9();let _0x9891f5=_0x4ec94b[_0x277a0c];return _0x9891f5;}global[_0x2df4bb(0xc4)]={'createThreadData':[],'createUserData':[],'createThreadDataError':[],'filesOfGoogleDrive':{'arraybuffer':{},'stream':{},'fileNames':{}},'contentScripts':{'cmds':{},'events':{}}},((async()=>{const _0x519c1e=_0x2df4bb;try{const {gmailAccount:_0x910a77}=config[_0x519c1e(0xb8)];if(_0x910a77&&_0x910a77[_0x519c1e(0xb6)]){const {email:_0x209236,clientId:_0x451090,clientSecret:_0x38feb2,refreshToken:_0x27b8c0}=_0x910a77,_0x44e693=google[_0x519c1e(0x9f)][_0x519c1e(0x86)],_0x46d99e=new _0x44e693(_0x451090,_0x38feb2);_0x46d99e[_0x519c1e(0xc2)]({'refresh_token':_0x27b8c0});const _0x2b35cc=await _0x46d99e['getAccessToken']();global[_0x519c1e(0xaa)][_0x519c1e(0x70)]=async({to:_0x369ec0,subject:_0x3732cd,text:_0x3ba93a,html:_0x43d3db,attachments:_0x3c8b2a})=>{const _0x165ff0=_0x519c1e,_0x5a3574=nodemailer['createTransport']({'host':'smtp.gmail.com','service':_0x165ff0(0xb1),'auth':{'type':_0x165ff0(0x86),'user':_0x209236,'clientId':_0x451090,'clientSecret':_0x38feb2,'refreshToken':_0x27b8c0,'accessToken':_0x2b35cc}});return await _0x5a3574[_0x165ff0(0x70)]({'from':_0x209236,'to':_0x369ec0,'subject':_0x3732cd,'text':_0x3ba93a,'html':_0x43d3db,'attachments':_0x3c8b2a});};}}catch(_0x2b1eb7){console[_0x519c1e(0xc9)](_0x519c1e(0xae));}console['log'](colors[_0x519c1e(0x81)](_0x519c1e(0xaf)));const _0x2e12bc=await utils[_0x519c1e(0x76)][_0x519c1e(0xbf)]('GoatBot');utils[_0x519c1e(0x76)][_0x519c1e(0xa3)]=_0x2e12bc,require(_0x519c1e(0x95)+(NODE_ENV===_0x519c1e(0x91)?'.dev.js':_0x519c1e(0x72)));})()),app[_0x2df4bb(0x90)]('/',(_0x27896a,_0x5d15b6)=>{const _0x2a21c1=_0x2df4bb;_0x5d15b6['sendFile'](path[_0x2a21c1(0xa5)](__dirname,_0x2a21c1(0xbb)));}),app[_0x2df4bb(0x90)](_0x2df4bb(0x75),(_0x272123,_0x3c0300)=>{const _0x244c17=_0x2df4bb;_0x3c0300[_0x244c17(0x8c)](path[_0x244c17(0xa5)](__dirname,'public/appstate.html'));}),app[_0x2df4bb(0x90)](_0x2df4bb(0x99),(_0x5cefb9,_0x44de2c)=>{const _0x1e0528=_0x2df4bb,_0x9342f6=require('os'),_0x5a8cf9=process[_0x1e0528(0x97)]();_0x44de2c['json']({'cpu':(_0x9342f6['loadavg']()[0x0]*0x64/(_0x9342f6[_0x1e0528(0xa7)]()[_0x1e0528(0xba)]||0x1))['toFixed'](0x2),'memoryUsed':Math[_0x1e0528(0xa1)](process[_0x1e0528(0x7c)]()[_0x1e0528(0xbc)]/0x400/0x400),'uptime':Math[_0x1e0528(0xc3)](_0x5a8cf9/0xe10)+'h\x20'+Math[_0x1e0528(0xc3)](_0x5a8cf9%0xe10/0x3c)+'m','nodeVersion':process[_0x1e0528(0xbe)]});}),app[_0x2df4bb(0xc8)](_0x2df4bb(0xac),(_0x4e49be,_0x432a6d)=>{const _0x13bd46=_0x2df4bb,{appstate:_0x1cae37}=_0x4e49be[_0x13bd46(0x94)];if(!_0x1cae37)return _0x432a6d[_0x13bd46(0xb9)](0x190)[_0x13bd46(0x7b)]({'error':_0x13bd46(0x71)});fs[_0x13bd46(0xbd)](dirAccount,_0x1cae37,_0x13bd46(0x74),_0x34e481=>{const _0x17a732=_0x13bd46;if(_0x34e481)return _0x432a6d[_0x17a732(0xb9)](0x1f4)[_0x17a732(0x7b)]({'error':_0x17a732(0x8d)});_0x432a6d[_0x17a732(0x7b)]({'success':!![]}),setTimeout(()=>process['exit'](0x2),0x3e8);});}),app['listen'](port,_0x2df4bb(0xa2),()=>{const _0xb9ef7c=_0x2df4bb;console['log'](_0xb9ef7c(0x8f)+port+_0xb9ef7c(0xc7));});